% Options for packages loaded elsewhere
\PassOptionsToPackage{unicode}{hyperref}
\PassOptionsToPackage{hyphens}{url}
%
\documentclass[
]{article}
\usepackage{lmodern}
\usepackage{amssymb,amsmath}
\usepackage{ifxetex,ifluatex}
\ifnum 0\ifxetex 1\fi\ifluatex 1\fi=0 % if pdftex
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
  \usepackage{textcomp} % provide euro and other symbols
\else % if luatex or xetex
  \usepackage{unicode-math}
  \defaultfontfeatures{Scale=MatchLowercase}
  \defaultfontfeatures[\rmfamily]{Ligatures=TeX,Scale=1}
\fi
% Use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\IfFileExists{microtype.sty}{% use microtype if available
  \usepackage[]{microtype}
  \UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\makeatletter
\@ifundefined{KOMAClassName}{% if non-KOMA class
  \IfFileExists{parskip.sty}{%
    \usepackage{parskip}
  }{% else
    \setlength{\parindent}{0pt}
    \setlength{\parskip}{6pt plus 2pt minus 1pt}}
}{% if KOMA class
  \KOMAoptions{parskip=half}}
\makeatother
\usepackage{xcolor}
\IfFileExists{xurl.sty}{\usepackage{xurl}}{} % add URL line breaks if available
\IfFileExists{bookmark.sty}{\usepackage{bookmark}}{\usepackage{hyperref}}
\hypersetup{
  pdftitle={ausplotsR: quickstart guide to basic analysis of TERN AusPlots vegetation data},
  pdfauthor={Greg Guerin \& Bernardo Blanco-Martin},
  hidelinks,
  pdfcreator={LaTeX via pandoc}}
\urlstyle{same} % disable monospaced font for URLs
\usepackage[margin=1in]{geometry}
\usepackage{color}
\usepackage{fancyvrb}
\newcommand{\VerbBar}{|}
\newcommand{\VERB}{\Verb[commandchars=\\\{\}]}
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
% Add ',fontsize=\small' for more characters per line
\usepackage{framed}
\definecolor{shadecolor}{RGB}{248,248,248}
\newenvironment{Shaded}{\begin{snugshade}}{\end{snugshade}}
\newcommand{\AlertTok}[1]{\textcolor[rgb]{0.94,0.16,0.16}{#1}}
\newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.77,0.63,0.00}{#1}}
\newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\BuiltInTok}[1]{#1}
\newcommand{\CharTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\CommentTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{#1}}
\newcommand{\DecValTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ErrorTok}[1]{\textcolor[rgb]{0.64,0.00,0.00}{\textbf{#1}}}
\newcommand{\ExtensionTok}[1]{#1}
\newcommand{\FloatTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ImportTok}[1]{#1}
\newcommand{\InformationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\NormalTok}[1]{#1}
\newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.81,0.36,0.00}{\textbf{#1}}}
\newcommand{\OtherTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{#1}}
\newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\RegionMarkerTok}[1]{#1}
\newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\StringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\VariableTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\WarningTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\usepackage{graphicx,grffile}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
% Set default figure placement to htbp
\makeatletter
\def\fps@figure{htbp}
\makeatother
\setlength{\emergencystretch}{3em} % prevent overfull lines
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
\setcounter{secnumdepth}{-\maxdimen} % remove section numbering

\title{ausplotsR: quickstart guide to basic analysis of TERN AusPlots
vegetation data}
\author{Greg Guerin \& Bernardo Blanco-Martin}
\date{2020-09-23}

\begin{document}
\maketitle

\hypertarget{introduction}{%
\subsection{Introduction}\label{introduction}}

TERN AusPlots is a national plot-based terrestrial ecosystem
surveillance monitoring method and dataset for Australia (Sparrow et
al.~2020). Through \textbf{ausplotsR}, users can directly access
AusPlots data collected by on-ground observers on vegetation and soils,
including physical sample/voucher details and barcode numbers. The
dataset can be downloaded in its entirety or as individual modules, and
can be subsetted by geographic bounding box or species name search. The
package also includes a series of bespoke functions for working with
AusPlots data, including visualisation, creating tables of species
composition, and calculation of tree basal area, fractional cover or
vegetation cover by growth form/structure/strata and so on.

This is a short guide for getting started with analysis of AusPlots data
through the \textbf{ausplotsR} R package. More information on making use
of AusPlots data in \textbf{ausplotsR} is available through the package
help files and manual. Below, we demonstrate installing the package,
accessing some AusPlots data, generating matrices and running simple
example analyses.

More comprehensive tutorials on accessing and analysing AusPlots data
(Blanco-Martin 2019) are available at:
\url{https://github.com/ternaustralia/TERN-Data-Skills/tree/master/EcosystemSurveillance_PlotData}

\hypertarget{installing-the-package-and-accessing-raw-data}{%
\subsection{Installing the package and accessing raw
data}\label{installing-the-package-and-accessing-raw-data}}

The latest version of \textbf{ausplotsR} can be installed directly from
github using the \texttt{devtools} package, which must be installed
first.

\begin{verbatim}
library(devtools)
install_github("ternaustralia/ausplotsR", build_vignettes = TRUE, dependencies = TRUE)
\end{verbatim}

Once installed, load the package as follows. Note, packages vegan, maps
and mapdata are required for \textbf{ausplotsR} to load, and functions
are also imported from packages: plyr, R.utils, simba, httr, jsonlite,
sp, maptools, ggplot2, gtools, jose, curl and betapart, while knitr,
rmarkdown and goeveg are required to build this package vignette (i.e.,
if `build\_vignettes' is set to TRUE above).

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{library}\NormalTok{(ausplotsR)}
\end{Highlighting}
\end{Shaded}

We can now access live data, starting here with basic site information
and vegetation point-intercept modules and using a bounding box to
spatially filter the dataset to central Australia. All data modules are
extracted via a single function, \texttt{get\_ausplots}:

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{# See ?get_ausplots to explore all data modules available}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{my.ausplots.data <-}\StringTok{ }\KeywordTok{get_ausplots}\NormalTok{(}\DataTypeTok{bounding_box =} \KeywordTok{c}\NormalTok{(}\DecValTok{125}\NormalTok{, }\DecValTok{140}\NormalTok{, }\DecValTok{-40}\NormalTok{, }\DecValTok{-10}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

The output of the above call is a list with the following
\texttt{\$elements}:

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{names}\NormalTok{(my.ausplots.data)}
\CommentTok{#> [1] "site.info" "veg.vouch" "veg.PI"    "citation"}
\end{Highlighting}
\end{Shaded}

The `site.info' table contains basic site and visit details. Here are a
selected few of the many fields:

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{head}\NormalTok{(my.ausplots.data}\OperatorTok{$}\NormalTok{site.info[, }\KeywordTok{c}\NormalTok{(}\StringTok{"site_location_name"}\NormalTok{, }\StringTok{"site_unique"}\NormalTok{, }\StringTok{"longitude"}\NormalTok{, }
    \StringTok{"latitude"}\NormalTok{, }\StringTok{"bioregion_name"}\NormalTok{)])}
\CommentTok{#>   site_location_name      site_unique longitude  latitude bioregion_name}
\CommentTok{#> 1         NTADAC0001 NTADAC0001-53518  130.7779 -13.15835            DAC}
\CommentTok{#> 2         NTASSD0015 NTASSD0015-53565  135.6168 -25.12393            SSD}
\CommentTok{#> 3         QDAMII0002 QDAMII0002-53546  138.1606 -20.00789            MII}
\CommentTok{#> 4         SATSTP0005 SATSTP0005-53513  138.8488 -29.45660            STP}
\CommentTok{#> 5         SATSTP0005 SATSTP0005-58639  138.8488 -29.45660            STP}
\CommentTok{#> 6         NTTDAB0001 NTTDAB0001-53580  131.6740 -13.96288            DAB}
\end{Highlighting}
\end{Shaded}

\textbf{Each survey is identified by the \emph{`site\_unique'} field,
which is unique combination of site ID (`site\_location\_name') and
visit ID (`site\_location\_visit\_id'). The \emph{`site\_unique'} field
therefore links all tables returned from the \texttt{get\_ausplots}
function}.

The `site.info' table and can be used to identify, subset or group
surveys in space and time, for example:

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{# count plot visits per Australian States:}
\KeywordTok{summary}\NormalTok{(}\KeywordTok{as.factor}\NormalTok{(my.ausplots.data}\OperatorTok{$}\NormalTok{site.info}\OperatorTok{$}\NormalTok{state))}
\CommentTok{#>  NT QLD  SA  WA }
\CommentTok{#> 151  48 172  25}
\end{Highlighting}
\end{Shaded}

\hypertarget{map-ausplots-sites-and-visualise-data}{%
\subsection{Map AusPlots sites and visualise
data}\label{map-ausplots-sites-and-visualise-data}}

The package has an in-built function - see \texttt{?ausplots\_visual} -
to rapidly map AusPlots over Australia and to visualise the relative
cover/abundance of green vegetation, plant growth forms and species.
Maps can also be generated manually using the longitude and latitude
fields in the \texttt{\$site.info} table.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{# Sites are coded by IBRA bioregion by default.}
\KeywordTok{map_ausplots}\NormalTok{(my.ausplots.data)}
\end{Highlighting}
\end{Shaded}

\includegraphics{start_guide_files/figure-latex/fig1-1.pdf}

Alternatively, the following call generates a pdf with a map of all
sites and attribute graphics for selected AusPlots:
\texttt{ausplotsR::ausplots\_visual()}

Here is a snippet of the raw point-intercept data that will be used in
the following examples to derive vegetation attributes:

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{head}\NormalTok{(}\KeywordTok{subset}\NormalTok{(my.ausplots.data}\OperatorTok{$}\NormalTok{veg.PI, }\OperatorTok{!}\KeywordTok{is.na}\NormalTok{(herbarium_determination)))}
\CommentTok{#>     site_location_name site_location_visit_id transect point_number}
\CommentTok{#> 312         NTAMGD0002                  53466    E5-W5           46}
\CommentTok{#> 315         NTAMGD0002                  53466    E5-W5           50}
\CommentTok{#> 339         NTAMGD0002                  53466    E5-W5           87}
\CommentTok{#> 351         NTAMGD0002                  53466    W4-E4            5}
\CommentTok{#> 361         NTAMGD0002                  53466    W4-E4           26}
\CommentTok{#> 378         NTAMGD0002                  53466    W4-E4           50}
\CommentTok{#>     herbarium_determination substrate in_canopy_sky  dead growth_form height}
\CommentTok{#> 312          Cleome viscosa    Gravel         FALSE FALSE        Forb   0.10}
\CommentTok{#> 315          Cleome viscosa      Bare         FALSE FALSE        Forb   0.05}
\CommentTok{#> 339          Cleome viscosa      Bare         FALSE FALSE        Forb   0.20}
\CommentTok{#> 351          Cleome viscosa      Bare         FALSE FALSE        Forb   0.20}
\CommentTok{#> 361          Cleome viscosa      Bare         FALSE FALSE        Forb   0.10}
\CommentTok{#> 378        Portulaca digyna    Gravel         FALSE FALSE        Forb   0.02}
\CommentTok{#>     veg_barcode standardised_name        family     genus specific_epithet}
\CommentTok{#> 312 NTA  006351    Cleome viscosa    Cleomaceae    Cleome          viscosa}
\CommentTok{#> 315 NTA  006351    Cleome viscosa    Cleomaceae    Cleome          viscosa}
\CommentTok{#> 339 NTA  006351    Cleome viscosa    Cleomaceae    Cleome          viscosa}
\CommentTok{#> 351 NTA  006351    Cleome viscosa    Cleomaceae    Cleome          viscosa}
\CommentTok{#> 361 NTA  006351    Cleome viscosa    Cleomaceae    Cleome          viscosa}
\CommentTok{#> 378 NTA  006311  Portulaca digyna Portulacaceae Portulaca           digyna}
\CommentTok{#>     infraspecific_rank infraspecific_epithet taxa_status    genus_species authorship}
\CommentTok{#> 312               <NA>                  <NA>    Accepted   Cleome viscosa         L.}
\CommentTok{#> 315               <NA>                  <NA>    Accepted   Cleome viscosa         L.}
\CommentTok{#> 339               <NA>                  <NA>    Accepted   Cleome viscosa         L.}
\CommentTok{#> 351               <NA>                  <NA>    Accepted   Cleome viscosa         L.}
\CommentTok{#> 361               <NA>                  <NA>    Accepted   Cleome viscosa         L.}
\CommentTok{#> 378               <NA>                  <NA>   Unchecked Portulaca digyna   F.Muell.}
\CommentTok{#>           published_in    rank hits_unique      site_unique}
\CommentTok{#> 312   Sp. Pl. 672 1753 SPECIES    E5-W5 46 NTAMGD0002-53466}
\CommentTok{#> 315   Sp. Pl. 672 1753 SPECIES    E5-W5 50 NTAMGD0002-53466}
\CommentTok{#> 339   Sp. Pl. 672 1753 SPECIES    E5-W5 87 NTAMGD0002-53466}
\CommentTok{#> 351   Sp. Pl. 672 1753 SPECIES     W4-E4 5 NTAMGD0002-53466}
\CommentTok{#> 361   Sp. Pl. 672 1753 SPECIES    W4-E4 26 NTAMGD0002-53466}
\CommentTok{#> 378 Fragm. 1: 170 1859 SPECIES    W4-E4 50 NTAMGD0002-53466}
\end{Highlighting}
\end{Shaded}

Note that `veg\_barcode' links species hits to the vegetation vouchers
module, while the `hits\_unique' field identifies the individual
point-intercept by transect and point number (see
\texttt{help(ausplotsR)} and references for more details on the plot
layout and survey method). At each point, plant species (if any), growth
form and height are recorded along with substrate type.

\hypertarget{example-1-latitudinal-pattern-in-proportional-vegetation-cover}{%
\subsection{Example 1: latitudinal pattern in proportional vegetation
cover}\label{example-1-latitudinal-pattern-in-proportional-vegetation-cover}}

Let's visualise basic vegetation cover as a function of latitude. First,
we call the \texttt{fractional\_cover} function on the extracted
point-intercept data (\texttt{\$veg.PI}). The function converts the raw
data to proportional cover of green/brown vegetation and bare substrate.
Note the calculation may take a few minutes for many AusPlots, so for
this example we will pull out a subset of 100 randomly drawn sites to
work with.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{sites100 <-}\StringTok{ }\NormalTok{my.ausplots.data}\OperatorTok{$}\NormalTok{veg.PI[}\KeywordTok{which}\NormalTok{(my.ausplots.data}\OperatorTok{$}\NormalTok{veg.PI}\OperatorTok{$}\NormalTok{site_unique }\OperatorTok{%in%}\StringTok{ }
\StringTok{    }\KeywordTok{sample}\NormalTok{(my.ausplots.data}\OperatorTok{$}\NormalTok{site.info}\OperatorTok{$}\NormalTok{site_unique, }\DecValTok{100}\NormalTok{)), ]}
\NormalTok{my.fractional <-}\StringTok{ }\KeywordTok{fractional_cover}\NormalTok{(sites100)}

\KeywordTok{head}\NormalTok{(my.fractional)}
\CommentTok{#>                       site_unique  bare brown green NA.}
\CommentTok{#> NTAARP0003-58424 NTAARP0003-58424 25.45 40.50 34.06   0}
\CommentTok{#> NTABRT0001-53616 NTABRT0001-53616 18.22 33.27 48.51   0}
\CommentTok{#> NTABRT0003-53618 NTABRT0003-53618 14.65 30.59 54.75   0}
\CommentTok{#> NTABRT0004-53619 NTABRT0004-53619 22.10 31.42 46.48   0}
\CommentTok{#> NTABRT0005-53620 NTABRT0005-53620 36.63 19.41 43.96   0}
\CommentTok{#> NTAFIN0002-53622 NTAFIN0002-53622  5.63 19.15 75.22   0}
\end{Highlighting}
\end{Shaded}

Next, we need to merge the fractional cover scores with longlat
coordinates from the site information table. We use the `site\_unique'
field (unique combination of site and visit IDs) to link tables returned
from the \texttt{get\_ausplots} function:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{my.fractional <-}\StringTok{ }\KeywordTok{merge}\NormalTok{(my.fractional, my.ausplots.data}\OperatorTok{$}\NormalTok{site.info, }\DataTypeTok{by =} \StringTok{"site_unique"}\NormalTok{)[, }
    \KeywordTok{c}\NormalTok{(}\StringTok{"site_unique"}\NormalTok{, }\StringTok{"bare"}\NormalTok{, }\StringTok{"brown"}\NormalTok{, }\StringTok{"green"}\NormalTok{, }\StringTok{"NA."}\NormalTok{, }\StringTok{"longitude"}\NormalTok{, }\StringTok{"latitude"}\NormalTok{)]}

\NormalTok{my.fractional <-}\StringTok{ }\KeywordTok{na.omit}\NormalTok{(my.fractional)}

\KeywordTok{head}\NormalTok{(my.fractional)}
\CommentTok{#>        site_unique  bare brown green NA. longitude  latitude}
\CommentTok{#> 1 NTAARP0003-58424 25.45 40.50 34.06   0  132.4571 -13.51697}
\CommentTok{#> 2 NTABRT0001-53616 18.22 33.27 48.51   0  133.2473 -22.28360}
\CommentTok{#> 3 NTABRT0003-53618 14.65 30.59 54.75   0  133.2699 -22.28358}
\CommentTok{#> 4 NTABRT0004-53619 22.10 31.42 46.48   0  133.6164 -22.28981}
\CommentTok{#> 5 NTABRT0005-53620 36.63 19.41 43.96   0  133.6121 -22.29108}
\CommentTok{#> 6 NTAFIN0002-53622  5.63 19.15 75.22   0  133.4343 -24.00942}
\end{Highlighting}
\end{Shaded}

Now we can plot out the continental relationship, e.g., between the
proportion of bare ground with no kind of vegetation cover above and
latitude.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{plot}\NormalTok{(bare }\OperatorTok{~}\StringTok{ }\NormalTok{latitude, }\DataTypeTok{data =}\NormalTok{ my.fractional, }\DataTypeTok{pch =} \DecValTok{20}\NormalTok{, }\DataTypeTok{bty =} \StringTok{"l"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics{start_guide_files/figure-latex/unnamed-chunk-11-1.pdf}

There appears to be a hump-backed relationship, with a higher proportion
of bare ground in the arid inland at mid-latitudes. We can add a simple
quadratic model to test/approximate this:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{my.fractional}\OperatorTok{$}\NormalTok{quadratic <-}\StringTok{ }\NormalTok{my.fractional}\OperatorTok{$}\NormalTok{latitude}\OperatorTok{^}\DecValTok{2}

\NormalTok{LM <-}\StringTok{ }\KeywordTok{lm}\NormalTok{(bare }\OperatorTok{~}\StringTok{ }\NormalTok{latitude }\OperatorTok{+}\StringTok{ }\NormalTok{quadratic, }\DataTypeTok{data =}\NormalTok{ my.fractional)}
\KeywordTok{summary}\NormalTok{(LM)}
\CommentTok{#> }
\CommentTok{#> Call:}
\CommentTok{#> lm(formula = bare ~ latitude + quadratic, data = my.fractional)}
\CommentTok{#> }
\CommentTok{#> Residuals:}
\CommentTok{#>     Min      1Q  Median      3Q     Max }
\CommentTok{#> -41.719 -12.352  -3.899  10.287  51.866 }
\CommentTok{#> }
\CommentTok{#> Coefficients:}
\CommentTok{#>               Estimate Std. Error t value Pr(>|t|)    }
\CommentTok{#> (Intercept) -176.71497   29.77860  -5.934 4.79e-08 ***}
\CommentTok{#> latitude     -17.89721    2.43854  -7.339 7.23e-11 ***}
\CommentTok{#> quadratic     -0.35673    0.04778  -7.467 3.94e-11 ***}
\CommentTok{#> ---}
\CommentTok{#> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1}
\CommentTok{#> }
\CommentTok{#> Residual standard error: 19.03 on 95 degrees of freedom}
\CommentTok{#> Multiple R-squared:  0.3712, Adjusted R-squared:  0.3579 }
\CommentTok{#> F-statistic: 28.04 on 2 and 95 DF,  p-value: 2.696e-10}

\CommentTok{# generate predicted values for plotting:}
\NormalTok{MinMax <-}\StringTok{ }\KeywordTok{c}\NormalTok{(}\KeywordTok{min}\NormalTok{(my.fractional}\OperatorTok{$}\NormalTok{latitude), }\KeywordTok{max}\NormalTok{(my.fractional}\OperatorTok{$}\NormalTok{latitude))}
\NormalTok{ND <-}\StringTok{ }\KeywordTok{data.frame}\NormalTok{(}\DataTypeTok{latitude =} \KeywordTok{seq}\NormalTok{(}\DataTypeTok{from =}\NormalTok{ MinMax[}\DecValTok{1}\NormalTok{], }\DataTypeTok{to =}\NormalTok{ MinMax[}\DecValTok{2}\NormalTok{], }\DataTypeTok{length.out =} \DecValTok{50}\NormalTok{), }
    \DataTypeTok{quadratic =} \KeywordTok{seq}\NormalTok{(}\DataTypeTok{from =}\NormalTok{ MinMax[}\DecValTok{1}\NormalTok{], }\DataTypeTok{to =}\NormalTok{ MinMax[}\DecValTok{2}\NormalTok{], }\DataTypeTok{length.out =} \DecValTok{50}\NormalTok{)}\OperatorTok{^}\DecValTok{2}\NormalTok{)}
\NormalTok{ND}\OperatorTok{$}\NormalTok{predict <-}\StringTok{ }\KeywordTok{predict}\NormalTok{(LM, }\DataTypeTok{newdata =}\NormalTok{ ND)}
\CommentTok{# }
\KeywordTok{plot}\NormalTok{(bare }\OperatorTok{~}\StringTok{ }\NormalTok{latitude, }\DataTypeTok{data =}\NormalTok{ my.fractional, }\DataTypeTok{pch =} \DecValTok{20}\NormalTok{, }\DataTypeTok{bty =} \StringTok{"n"}\NormalTok{)}
\KeywordTok{points}\NormalTok{(ND}\OperatorTok{$}\NormalTok{latitude, ND}\OperatorTok{$}\NormalTok{predict, }\DataTypeTok{type =} \StringTok{"l"}\NormalTok{, }\DataTypeTok{lwd =} \DecValTok{2}\NormalTok{, }\DataTypeTok{col =} \StringTok{"darkblue"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics{start_guide_files/figure-latex/unnamed-chunk-12-1.pdf}

\hypertarget{example-2-species-by-sites-table}{%
\subsection{Example 2: Species by sites
table}\label{example-2-species-by-sites-table}}

Aside from `gross' values from plots such as fractional cover, many
analyses in community ecology begin with species abundance information.
With \textbf{ausplotsR} you can generate this easily from the more
complex vegetation point-intercept data. The first step to work with
species-level AusPlots data is to create a species occurrence matrix.
The \texttt{species\_table} function in the \textbf{ausplotsR} package
can be used to create this type of matrix. This function takes a data
frame of individual raw point-intercept hits (i.e.~a \texttt{\$veg.PI}
data frame) generated using the \texttt{get\_ausplots} function and
returns a `species against sites' matrix:

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{# The species_table function below can also take the `$veg.voucher` module as}
\CommentTok{# input, but `m_kind='PA'` must be specified to get a sensible presence/absence}
\CommentTok{# output.}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{# The 'species_name' argument below specifies use of the 'standardised_name'}
\CommentTok{# field to identify species, which is based on herbarium_determination names}
\CommentTok{# (i.e., 'HD' option in species_name) matched to accepted scientific name}
\CommentTok{# according to a standard (http://www.worldfloraonline.org/).}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{my.sppBYsites <-}\StringTok{ }\KeywordTok{species_table}\NormalTok{(my.ausplots.data}\OperatorTok{$}\NormalTok{veg.PI, }\DataTypeTok{m_kind =} \StringTok{"percent_cover"}\NormalTok{, }
    \DataTypeTok{cover_type =} \StringTok{"PFC"}\NormalTok{, }\DataTypeTok{species_name =} \StringTok{"SN"}\NormalTok{)}

\CommentTok{# check the number of rows (plots) and columns (species) in the matrix}
\KeywordTok{dim}\NormalTok{(my.sppBYsites)}
\CommentTok{#> [1]  391 1751}

\CommentTok{# look at the top left corner (as the matrix is large)}
\NormalTok{my.sppBYsites[}\DecValTok{1}\OperatorTok{:}\DecValTok{5}\NormalTok{, }\DecValTok{1}\OperatorTok{:}\DecValTok{5}\NormalTok{]}
\CommentTok{#>                  Abutilon Abutilon.fraseri Abutilon.halophilum Abutilon.hannii}
\CommentTok{#> NTAARP0001-58422        0                0                   0               0}
\CommentTok{#> NTAARP0002-58423        0                0                   0               0}
\CommentTok{#> NTAARP0003-58424        0                0                   0               0}
\CommentTok{#> NTABRT0001-53616        0                0                   0               0}
\CommentTok{#> NTABRT0002-53617        0                0                   0               0}
\CommentTok{#>                  Abutilon.leucopetalum}
\CommentTok{#> NTAARP0001-58422                     0}
\CommentTok{#> NTAARP0002-58423                     0}
\CommentTok{#> NTAARP0003-58424                     0}
\CommentTok{#> NTABRT0001-53616                     0}
\CommentTok{#> NTABRT0002-53617                     0}
\end{Highlighting}
\end{Shaded}

We can crudely pull out the 10 highest ranking species in terms of their
percent cover cumulative across all plots they occur in:

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{rev}\NormalTok{(}\KeywordTok{sort}\NormalTok{(}\KeywordTok{colSums}\NormalTok{(my.sppBYsites)))[}\DecValTok{1}\OperatorTok{:}\DecValTok{10}\NormalTok{]}
\CommentTok{#>     Triodia.basedowii    Aristida.holathera    Eucalyptus.obliqua }
\CommentTok{#>              651.4038              456.6403              359.5146 }
\CommentTok{#>         Eulalia.aurea    Eucalyptus.baxteri     Triodia.bitextura }
\CommentTok{#>              340.4958              335.0025              325.2499 }
\CommentTok{#>     Cenchrus.ciliaris       Triodia.pungens       Acacia.shirleyi }
\CommentTok{#>              306.7625              291.3861              282.0792 }
\CommentTok{#> Schizachyrium.fragile }
\CommentTok{#>              264.3876}
\end{Highlighting}
\end{Shaded}

A simple example of downstream visualisation and analysis of
species-level AusPlots data is Rank-Abundance Curves (also known as
Whittaker Plots). Rank-Abundance Curves provide further information on
species diversity. They provide a more complete picture than a single
diversity index. Their x-axis represents the abundance rank (from most
to least abundant) and in the y-axis the species relative abundance.
Thus, they depict both Species Richness and Species Evenness (slope of
the line that fits the rank; steep gradient indicates low evenness and a
shallow gradient high evenness).

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{# Whittaker plots for some selected AusPlots:}
\NormalTok{goeveg}\OperatorTok{::}\KeywordTok{racurves}\NormalTok{(my.sppBYsites[}\DecValTok{10}\OperatorTok{:}\DecValTok{15}\NormalTok{, ], }\DataTypeTok{bw =}\NormalTok{ F)}
\end{Highlighting}
\end{Shaded}

\includegraphics{start_guide_files/figure-latex/unnamed-chunk-17-1.pdf}

\begin{Shaded}
\begin{Highlighting}[]

\CommentTok{# And then with alternative relative abundance models fitted for communities}
\CommentTok{# individually:}
\KeywordTok{par}\NormalTok{(}\DataTypeTok{mfrow =} \KeywordTok{c}\NormalTok{(}\DecValTok{2}\NormalTok{, }\DecValTok{2}\NormalTok{), }\DataTypeTok{mar =} \KeywordTok{c}\NormalTok{(}\DecValTok{4}\NormalTok{, }\DecValTok{4}\NormalTok{, }\DecValTok{1}\NormalTok{, }\DecValTok{1}\NormalTok{))}
\ControlFlowTok{for}\NormalTok{ (i }\ControlFlowTok{in} \KeywordTok{c}\NormalTok{(}\DecValTok{1}\OperatorTok{:}\DecValTok{4}\NormalTok{)) \{}
    \KeywordTok{plot}\NormalTok{(vegan}\OperatorTok{::}\KeywordTok{radfit}\NormalTok{(}\KeywordTok{round}\NormalTok{(my.sppBYsites[}\DecValTok{9} \OperatorTok{+}\StringTok{ }\NormalTok{i, ], }\DataTypeTok{digits =} \DecValTok{0}\NormalTok{), }\DataTypeTok{log =} \StringTok{"xy"}\NormalTok{), }\DataTypeTok{pch =} \DecValTok{20}\NormalTok{, }
        \DataTypeTok{legend =} \OtherTok{FALSE}\NormalTok{, }\DataTypeTok{bty =} \StringTok{"l"}\NormalTok{)}
    \KeywordTok{legend}\NormalTok{(}\StringTok{"topright"}\NormalTok{, }\DataTypeTok{legend =} \KeywordTok{c}\NormalTok{(}\StringTok{"Null"}\NormalTok{, }\StringTok{"Preemption"}\NormalTok{, }\StringTok{"Lognormal"}\NormalTok{, }\StringTok{"Zipf"}\NormalTok{, }\StringTok{"Mandelbrot"}\NormalTok{), }
        \DataTypeTok{lwd =} \KeywordTok{rep}\NormalTok{(}\DecValTok{1}\NormalTok{, }\DecValTok{5}\NormalTok{), }\DataTypeTok{col =} \KeywordTok{c}\NormalTok{(}\StringTok{"black"}\NormalTok{, }\StringTok{"red"}\NormalTok{, }\StringTok{"green"}\NormalTok{, }\StringTok{"blue"}\NormalTok{, }\StringTok{"cyan"}\NormalTok{), }\DataTypeTok{cex =} \FloatTok{0.7}\NormalTok{, }
        \DataTypeTok{bty =} \StringTok{"n"}\NormalTok{)}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\includegraphics{start_guide_files/figure-latex/unnamed-chunk-17-2.pdf}

\hypertarget{example-3-quick-species-lists}{%
\subsection{Example 3: Quick species
lists}\label{example-3-quick-species-lists}}

Perhaps you simply want to browse which plant species have been recorded
in AusPlots, without all the associated raw data? Here, the
\texttt{species\_list} function is your friend:

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{# The species_list function is designed to take $veg.voucher as input but can}
\CommentTok{# also take $veg.PI}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{# print a list of genus_species-only records from selected plots:}
\KeywordTok{species_list}\NormalTok{(}\KeywordTok{subset}\NormalTok{(my.ausplots.data}\OperatorTok{$}\NormalTok{veg.vouch, site_unique }\OperatorTok{%in%}\StringTok{ }\KeywordTok{unique}\NormalTok{(site_unique)[}\DecValTok{1}\OperatorTok{:}\DecValTok{2}\NormalTok{]), }
    \DataTypeTok{grouping =} \StringTok{"by_site"}\NormalTok{, }\DataTypeTok{species_name =} \StringTok{"GS"}\NormalTok{)}
\CommentTok{#> $NTAMGD0002}
\CommentTok{#>  [1] Abutilon hannii             Abutilon indicum           }
\CommentTok{#>  [3] Aristida latifolia          Astrebla elymoides         }
\CommentTok{#>  [5] Astrebla squarrosa          Boerhavia paludosa         }
\CommentTok{#>  [7] Brachyachne convergens      Bulbostylis barbata        }
\CommentTok{#>  [9] Cleome viscosa              Crotalaria dissitiflora    }
\CommentTok{#> [11] Crotalaria medicaginea      Cyperus gilesii            }
\CommentTok{#> [13] Cyperus iria                Dactyloctenium radulans    }
\CommentTok{#> [15] Desmodium muelleri          Enneapogon polyphyllus     }
\CommentTok{#> [17] Euphorbia                   Fimbristylis dichotoma     }
\CommentTok{#> [19] Gomphrena breviflora        Goodenia fascicularis      }
\CommentTok{#> [21] Heliotropium conocarpum     Heliotropium plumosum      }
\CommentTok{#> [23] Heliotropium tenuifolium    Hibiscus                   }
\CommentTok{#> [25] Indigofera polygaloides     Ipomoea coptica            }
\CommentTok{#> [27] Ipomoea lonchophylla        Iseilema fragile           }
\CommentTok{#> [29] Kallstroemia pentandra      Neptunia monosperma        }
\CommentTok{#> [31] Panicum laevinode           Paspalidium retiglume      }
\CommentTok{#> [33] Phyllanthus lacerosus       Phyllanthus maderaspatensis}
\CommentTok{#> [35] Portulaca                   Portulaca digyna           }
\CommentTok{#> [37] Portulaca oleracea          Portulaca oligosperma      }
\CommentTok{#> [39] Portulaca pilosa            Ptilotus exaltatus         }
\CommentTok{#> [41] Ptilotus spicatus           Rhynchosia minima          }
\CommentTok{#> [43] Salsola kali                Sclerolaena bicornis       }
\CommentTok{#> [45] Sclerolaena lanicuspis      Sida argillacea            }
\CommentTok{#> [47] Sida fibulifera             Sida spinosa               }
\CommentTok{#> [49] Sorghum timorense           Sporobolus carolii         }
\CommentTok{#> [51] Streptoglossa bubakii       Tragus australianus        }
\CommentTok{#> [53] Trianthema triquetra        Uranthoecium truncatum     }
\CommentTok{#> }
\CommentTok{#> $SATSTP0002}
\CommentTok{#>  [1] Abutilon leucopetalum        Acacia ligulata             }
\CommentTok{#>  [3] Acacia victoriae             Aristida arida              }
\CommentTok{#>  [5] Casuarina pauper             Cenchrus ciliaris           }
\CommentTok{#>  [7] Convolvulus remotus          Dissocarpus paradoxus       }
\CommentTok{#>  [9] Dodonaea viscosa             Dysphania cristata          }
\CommentTok{#> [11] Einadia nutans               Enchylaena tomentosa        }
\CommentTok{#> [13] Enneapogon avenaceus         Enneapogon cylindricus      }
\CommentTok{#> [15] Eragrostis dielsii           Eremophila sturtii          }
\CommentTok{#> [17] Euphorbia drummondii         Lysiana exocarpi            }
\CommentTok{#> [19] Maireana pyramidata          Nicotiana simulans          }
\CommentTok{#> [21] Paractaenum novae-hollandiae Pimelea microcephala        }
\CommentTok{#> [23] Rhagodia spinescens          Salsola kali                }
\CommentTok{#> [25] Santalum lanceolatum         Sclerolaena obliquicuspis   }
\CommentTok{#> [27] Senecio spanomerus           Senna artemisioides         }
\CommentTok{#> [29] Sida ammophila               Sida fibulifera             }
\CommentTok{#> [31] Solanum quadriloculatum      Sonchus oleraceus           }
\CommentTok{#> [33] Swainsona burkittii          Tetragonia eremaea          }
\CommentTok{#> [35] Triraphis mollis}

\CommentTok{# overall species list ordered by family (for demonstration we print only part):}
\KeywordTok{species_list}\NormalTok{(my.ausplots.data}\OperatorTok{$}\NormalTok{veg.vouch, }\DataTypeTok{grouping =} \StringTok{"collapse"}\NormalTok{, }\DataTypeTok{species_name =} \StringTok{"SN"}\NormalTok{, }
    \DataTypeTok{append_family =} \OtherTok{TRUE}\NormalTok{)[}\DecValTok{1}\OperatorTok{:}\DecValTok{20}\NormalTok{]}
\CommentTok{#>  [1] Acanthaceae--Dicliptera armata              }
\CommentTok{#>  [2] Acanthaceae--Dipteracanthus australasicus   }
\CommentTok{#>  [3] Acanthaceae--Hygrophila ringens var. ringens}
\CommentTok{#>  [4] Acanthaceae--Nelsonia canescens             }
\CommentTok{#>  [5] Acanthaceae--Rostellularia adscendens       }
\CommentTok{#>  [6] Aizoaceae--Carpobrotus rossii               }
\CommentTok{#>  [7] Aizoaceae--Carpobrotus virescens            }
\CommentTok{#>  [8] Aizoaceae--Disphyma clavellatum             }
\CommentTok{#>  [9] Aizoaceae--Gunniopsis                       }
\CommentTok{#> [10] Aizoaceae--Gunniopsis calcarea              }
\CommentTok{#> [11] Aizoaceae--Gunniopsis kochii                }
\CommentTok{#> [12] Aizoaceae--Gunniopsis quadrifida            }
\CommentTok{#> [13] Aizoaceae--Gunniopsis septifraga            }
\CommentTok{#> [14] Aizoaceae--Gunniopsis zygophylloides        }
\CommentTok{#> [15] Aizoaceae--Mesembryanthemum crystallinum    }
\CommentTok{#> [16] Aizoaceae--Mesembryanthemum nodiflorum      }
\CommentTok{#> [17] Aizoaceae--Sarcozona praecox                }
\CommentTok{#> [18] Aizoaceae--Tetragonia                       }
\CommentTok{#> [19] Aizoaceae--Tetragonia eremaea               }
\CommentTok{#> [20] Aizoaceae--Tetragonia implexicoma}
\end{Highlighting}
\end{Shaded}

\hypertarget{explore-tern-ausplots}{%
\subsection{Explore TERN AusPlots}\label{explore-tern-ausplots}}

In addition to the key site info and vegetation point-intercept modules
introduced above, \texttt{get\_ausplots} is your gateway to raw data
modules for vegetation structural summaries, vegetation vouchers (covers
the full species diversity observed at the plot and includes tissue
sample details), basal wedge, and soils subsites, bulk density and
pit/characterisation (including bulk and metagenomics soil samples).

\hypertarget{references}{%
\subsection{References}\label{references}}

Blanco-Martin, B. (2019) Tutorial: Understanding and using the
`ausplotsR' package and AusPlots data. Terrestrial Ecology Research
Network. Version 2019.04.0, April 2019.
\url{https://github.com/ternaustralia/TERN-Data-Skills/}

Sparrow, B., Foulkes, J., Wardle, G., Leitch, E., Caddy-Retalic, S., van
Leeuwen, S., Tokmakoff, A., Thurgate, N., Guerin, G.R. and Lowe, A.J.
(2020) A vegetation and soil survey method for surveillance monitoring
of rangeland environments. \emph{Frontiers in Ecology and Evolution},
8:157.

\end{document}
