% Options for packages loaded elsewhere
\PassOptionsToPackage{unicode}{hyperref}
\PassOptionsToPackage{hyphens}{url}
%
\documentclass[
]{article}
\usepackage{lmodern}
\usepackage{amssymb,amsmath}
\usepackage{ifxetex,ifluatex}
\ifnum 0\ifxetex 1\fi\ifluatex 1\fi=0 % if pdftex
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
  \usepackage{textcomp} % provide euro and other symbols
\else % if luatex or xetex
  \usepackage{unicode-math}
  \defaultfontfeatures{Scale=MatchLowercase}
  \defaultfontfeatures[\rmfamily]{Ligatures=TeX,Scale=1}
\fi
% Use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\IfFileExists{microtype.sty}{% use microtype if available
  \usepackage[]{microtype}
  \UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\makeatletter
\@ifundefined{KOMAClassName}{% if non-KOMA class
  \IfFileExists{parskip.sty}{%
    \usepackage{parskip}
  }{% else
    \setlength{\parindent}{0pt}
    \setlength{\parskip}{6pt plus 2pt minus 1pt}}
}{% if KOMA class
  \KOMAoptions{parskip=half}}
\makeatother
\usepackage{xcolor}
\IfFileExists{xurl.sty}{\usepackage{xurl}}{} % add URL line breaks if available
\IfFileExists{bookmark.sty}{\usepackage{bookmark}}{\usepackage{hyperref}}
\hypersetup{
  pdftitle={ausplotsR: quickstart guide to basic analysis of TERN AusPlots vegetation data},
  pdfauthor={Greg Guerin \& Bernardo Blanco-Martin},
  hidelinks,
  pdfcreator={LaTeX via pandoc}}
\urlstyle{same} % disable monospaced font for URLs
\usepackage[margin=1in]{geometry}
\usepackage{color}
\usepackage{fancyvrb}
\newcommand{\VerbBar}{|}
\newcommand{\VERB}{\Verb[commandchars=\\\{\}]}
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
% Add ',fontsize=\small' for more characters per line
\usepackage{framed}
\definecolor{shadecolor}{RGB}{248,248,248}
\newenvironment{Shaded}{\begin{snugshade}}{\end{snugshade}}
\newcommand{\AlertTok}[1]{\textcolor[rgb]{0.94,0.16,0.16}{#1}}
\newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.77,0.63,0.00}{#1}}
\newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\BuiltInTok}[1]{#1}
\newcommand{\CharTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\CommentTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{#1}}
\newcommand{\DecValTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ErrorTok}[1]{\textcolor[rgb]{0.64,0.00,0.00}{\textbf{#1}}}
\newcommand{\ExtensionTok}[1]{#1}
\newcommand{\FloatTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ImportTok}[1]{#1}
\newcommand{\InformationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\NormalTok}[1]{#1}
\newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.81,0.36,0.00}{\textbf{#1}}}
\newcommand{\OtherTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{#1}}
\newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\RegionMarkerTok}[1]{#1}
\newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\StringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\VariableTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\WarningTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\usepackage{graphicx,grffile}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
% Set default figure placement to htbp
\makeatletter
\def\fps@figure{htbp}
\makeatother
\setlength{\emergencystretch}{3em} % prevent overfull lines
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
\setcounter{secnumdepth}{-\maxdimen} % remove section numbering

\title{ausplotsR: quickstart guide to basic analysis of TERN AusPlots
vegetation data}
\author{Greg Guerin \& Bernardo Blanco-Martin}
\date{2020-08-11}

\begin{document}
\maketitle

\hypertarget{introduction}{%
\subsection{Introduction}\label{introduction}}

TERN AusPlots is a national plot-based terrestrial ecosystem
surveillance monitoring method and dataset for Australia (Sparrow et
al.~2020). Through \textbf{ausplotsR}, users can directly access
AusPlots data collected by on-ground observers on vegetation and soils,
including physical sample/voucher details and barcode numbers. The
dataset can be downloaded in its entirety or as individual modules, and
can be subsetted by geographic bounding box or species name search. The
package also includes a series of bespoke functions for working with
AusPlots data, including visualisation, creating tables of species
composition, and calculation of tree basal area, fractional cover or
vegetation cover by growth form/structure/strata and so on.

This is a short guide for getting started with analysis of AusPlots data
through the \textbf{ausplotsR} R package. More information on making use
of AusPlots data in \textbf{ausplotsR} is available through the package
help files and manual. Below, we demonstrate installing the package,
accessing some AusPlots data, generating matrices and running simple
example analyses.

More comprehensive tutorials on accessing and analysing AusPlots data
(Blanco-Martin 2019) are available at:
\url{https://github.com/ternaustralia/TERN-Data-Skills/tree/master/EcosystemSurveillance_PlotData}

\hypertarget{installing-the-package-and-accessing-raw-data}{%
\subsection{Installing the package and accessing raw
data}\label{installing-the-package-and-accessing-raw-data}}

The latest version of \textbf{ausplotsR} can be installed directly from
github using the \texttt{devtools} package, which must be installed
first.

\begin{verbatim}
library(devtools)
install_github("ternaustralia/ausplotsR", build_vignettes = TRUE, dependencies = TRUE)
\end{verbatim}

Once installed, load the package.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{library}\NormalTok{(ausplotsR)}
\end{Highlighting}
\end{Shaded}

We can now access live data, starting here with basic site information
and vegetation point-intercept modules and using a bounding box to
spatially filter the dataset to central Australia. All data modules are
extracted via a single function, \texttt{get\_ausplots}:

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{# see ?get_ausplots to explore all data modules available}
\NormalTok{my.ausplots.data <-}\StringTok{ }\KeywordTok{get_ausplots}\NormalTok{(}\DataTypeTok{veg.vouchers =} \OtherTok{FALSE}\NormalTok{, }\DataTypeTok{bounding_box =} \KeywordTok{c}\NormalTok{(}\DecValTok{125}\NormalTok{, }\DecValTok{140}\NormalTok{, }
    \DecValTok{-40}\NormalTok{, }\DecValTok{-10}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

The output of the above call is a list with the following
\texttt{\$elements}:

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{names}\NormalTok{(my.ausplots.data)}
\CommentTok{#> [1] "site.info" "veg.PI"    "citation"}
\end{Highlighting}
\end{Shaded}

The `site.info' table contains basic site and visit details. Here are a
selected few of the many fields:

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{head}\NormalTok{(my.ausplots.data}\OperatorTok{$}\NormalTok{site.info[, }\KeywordTok{c}\NormalTok{(}\StringTok{"site_location_name"}\NormalTok{, }\StringTok{"site_unique"}\NormalTok{, }\StringTok{"longitude"}\NormalTok{, }
    \StringTok{"latitude"}\NormalTok{, }\StringTok{"bioregion_name"}\NormalTok{)])}
\CommentTok{#>   site_location_name      site_unique longitude  latitude bioregion_name}
\CommentTok{#> 1         NTADAC0001 NTADAC0001-53518  130.7779 -13.15835            DAC}
\CommentTok{#> 2         NTASSD0015 NTASSD0015-53565  135.6168 -25.12393            SSD}
\CommentTok{#> 3         QDAMII0002 QDAMII0002-53546  138.1606 -20.00789            MII}
\CommentTok{#> 4         SATSTP0005 SATSTP0005-53513  138.8488 -29.45660            STP}
\CommentTok{#> 5         SATSTP0005 SATSTP0005-58639  138.8488 -29.45660            STP}
\CommentTok{#> 6         NTTDAB0001 NTTDAB0001-53580  131.6740 -13.96288            DAB}
\end{Highlighting}
\end{Shaded}

\textbf{Each survey is identified by the \emph{`site\_unique'} field,
which is unique combination of site ID (`site\_location\_name') and
visit ID (`site\_location\_visit\_id'). The \emph{`site\_unique'} field
therefore links all tables returned from the \texttt{get\_ausplots}
function}.

The `site.info' table and can be used to identify, subset or group
surveys in space and time, for example:

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{# count plot visits per Australian States:}
\KeywordTok{summary}\NormalTok{(}\KeywordTok{as.factor}\NormalTok{(my.ausplots.data}\OperatorTok{$}\NormalTok{site.info}\OperatorTok{$}\NormalTok{state))}
\CommentTok{#>  NT QLD  SA  WA }
\CommentTok{#> 151  48 172  25}
\end{Highlighting}
\end{Shaded}

\hypertarget{map-ausplots-sites-and-visualise-data}{%
\subsection{Map AusPlots sites and visualise
data}\label{map-ausplots-sites-and-visualise-data}}

The package has an in-built function - see \texttt{?ausplots\_visual} -
to rapidly map AusPlots over Australia and to visualise the relative
cover/abundance of green vegetation, plant growth forms and species.
Maps can also be generated manually using the longitude and latitude
fields in the \texttt{\$site.info} table.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{# Sites are coded by IBRA bioregion by default.}
\KeywordTok{map_ausplots}\NormalTok{(my.ausplots.data)}
\end{Highlighting}
\end{Shaded}

\includegraphics{start_guide_files/figure-latex/fig1-1.pdf}

Alternatively, the following call generates a pdf with a map of all
sites and attribute graphics for selected AusPlots:
\texttt{ausplotsR::ausplots\_visual()}

Here is a snippet of the raw point-intercept data that will be used in
the following examples to derive vegetation attributes:

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{head}\NormalTok{(}\KeywordTok{subset}\NormalTok{(my.ausplots.data}\OperatorTok{$}\NormalTok{veg.PI, }\OperatorTok{!}\KeywordTok{is.na}\NormalTok{(herbarium_determination)))}
\CommentTok{#>    site_location_name site_location_visit_id transect point_number veg_barcode}
\CommentTok{#> 17         NTAMGD0002                  53466    E5-W5            2 NTA  006387}
\CommentTok{#> 20         NTAMGD0002                  53466    E5-W5            5 NTA  006345}
\CommentTok{#> 29         NTAMGD0002                  53466    E5-W5           15 NTA  006345}
\CommentTok{#> 30         NTAMGD0002                  53466    E5-W5           16 NTA  006317}
\CommentTok{#> 31         NTAMGD0002                  53466    E5-W5           17 NTA  006401}
\CommentTok{#> 33         NTAMGD0002                  53466    E5-W5           19 NTA  006387}
\CommentTok{#>    herbarium_determination substrate in_canopy_sky  dead   growth_form height hits_unique}
\CommentTok{#> 17       Sorghum timorense      Bare         FALSE FALSE Tussock grass   0.10     E5-W5 2}
\CommentTok{#> 20         Sida fibulifera      Bare         FALSE FALSE          Forb   0.05     E5-W5 5}
\CommentTok{#> 29         Sida fibulifera    Gravel         FALSE FALSE          Forb   0.10    E5-W5 15}
\CommentTok{#> 30        Iseilema fragile      Bare         FALSE FALSE Tussock grass   0.20    E5-W5 16}
\CommentTok{#> 31      Astrebla elymoides    Gravel         FALSE FALSE Tussock grass   0.20    E5-W5 17}
\CommentTok{#> 33       Sorghum timorense    Gravel         FALSE FALSE Tussock grass   0.10    E5-W5 19}
\CommentTok{#>         site_unique}
\CommentTok{#> 17 NTAMGD0002-53466}
\CommentTok{#> 20 NTAMGD0002-53466}
\CommentTok{#> 29 NTAMGD0002-53466}
\CommentTok{#> 30 NTAMGD0002-53466}
\CommentTok{#> 31 NTAMGD0002-53466}
\CommentTok{#> 33 NTAMGD0002-53466}
\end{Highlighting}
\end{Shaded}

Note that `veg\_barcode' links species hits to the vegetation vouchers
module, while the `hits\_unique' field identifies the individual
point-intercept by transect and point number (see
\texttt{help(ausplotsR)} and references for more details on the plot
layout and survey method). At each point, plant species (if any), growth
form and height are recorded along with substrate type.

\hypertarget{example-1-latitudinal-pattern-in-proportional-vegetation-cover}{%
\subsection{Example 1: latitudinal pattern in proportional vegetation
cover}\label{example-1-latitudinal-pattern-in-proportional-vegetation-cover}}

Let's visualise basic vegetation cover as a function of latitude. First,
we call the \texttt{fractional\_cover} function on the extracted
point-intercept data (\texttt{\$veg.PI}). The function converts the raw
data to proportional cover of green/brown vegetation and bare substrate.
Note the calculation may take a few minutes for many AusPlots, so for
this example we will pull out a subset of 100 randomly drawn sites to
work with.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{sites100 <-}\StringTok{ }\NormalTok{my.ausplots.data}\OperatorTok{$}\NormalTok{veg.PI[}\KeywordTok{which}\NormalTok{(my.ausplots.data}\OperatorTok{$}\NormalTok{veg.PI}\OperatorTok{$}\NormalTok{site_unique }\OperatorTok{%in%}\StringTok{ }
\StringTok{    }\KeywordTok{sample}\NormalTok{(my.ausplots.data}\OperatorTok{$}\NormalTok{site.info}\OperatorTok{$}\NormalTok{site_unique, }\DecValTok{100}\NormalTok{)), ]}
\NormalTok{my.fractional <-}\StringTok{ }\KeywordTok{fractional_cover}\NormalTok{(sites100)}

\KeywordTok{head}\NormalTok{(my.fractional)}
\CommentTok{#>                       site_unique  bare brown green  NA.}
\CommentTok{#> NTAARP0001-58422 NTAARP0001-58422  3.27 28.42 68.32 0.00}
\CommentTok{#> NTAARP0003-58424 NTAARP0003-58424 25.45 40.40 34.16 0.00}
\CommentTok{#> NTABRT0002-53617 NTABRT0002-53617 11.78 25.74 61.49 0.99}
\CommentTok{#> NTABRT0005-53620 NTABRT0005-53620 36.63 19.41 43.96 0.00}
\CommentTok{#> NTAFIN0002-53622 NTAFIN0002-53622  5.63 19.25 75.12 0.00}
\CommentTok{#> NTAFIN0002-58018 NTAFIN0002-58018 14.65 40.50 44.85 0.00}
\end{Highlighting}
\end{Shaded}

Next, we need to merge the fractional cover scores with longlat
coordinates from the site information table. We use the `site\_unique'
field (unique combination of site and visit IDs) to link tables returned
from the \texttt{get\_ausplots} function:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{my.fractional <-}\StringTok{ }\KeywordTok{merge}\NormalTok{(my.fractional, my.ausplots.data}\OperatorTok{$}\NormalTok{site.info, }\DataTypeTok{by =} \StringTok{"site_unique"}\NormalTok{)[, }
    \KeywordTok{c}\NormalTok{(}\StringTok{"site_unique"}\NormalTok{, }\StringTok{"bare"}\NormalTok{, }\StringTok{"brown"}\NormalTok{, }\StringTok{"green"}\NormalTok{, }\StringTok{"NA."}\NormalTok{, }\StringTok{"longitude"}\NormalTok{, }\StringTok{"latitude"}\NormalTok{)]}

\NormalTok{my.fractional <-}\StringTok{ }\KeywordTok{na.omit}\NormalTok{(my.fractional)}

\KeywordTok{head}\NormalTok{(my.fractional)}
\CommentTok{#>        site_unique  bare brown green  NA. longitude  latitude}
\CommentTok{#> 1 NTAARP0001-58422  3.27 28.42 68.32 0.00  132.2701 -13.55729}
\CommentTok{#> 2 NTAARP0003-58424 25.45 40.40 34.16 0.00  132.4571 -13.51697}
\CommentTok{#> 3 NTABRT0002-53617 11.78 25.74 61.49 0.99  133.2506 -22.28367}
\CommentTok{#> 4 NTABRT0005-53620 36.63 19.41 43.96 0.00  133.6121 -22.29108}
\CommentTok{#> 5 NTAFIN0002-53622  5.63 19.25 75.12 0.00  133.4343 -24.00942}
\CommentTok{#> 6 NTAFIN0002-58018 14.65 40.50 44.85 0.00  133.4343 -24.00942}
\end{Highlighting}
\end{Shaded}

Now we can plot out the continental relationship, e.g., between the
proportion of bare ground with no kind of vegetation cover above and
latitude.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{plot}\NormalTok{(bare }\OperatorTok{~}\StringTok{ }\NormalTok{latitude, }\DataTypeTok{data =}\NormalTok{ my.fractional, }\DataTypeTok{pch =} \DecValTok{20}\NormalTok{, }\DataTypeTok{bty =} \StringTok{"l"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics{start_guide_files/figure-latex/unnamed-chunk-9-1.pdf}

There appears to be a hump-backed relationship, with a higher proportion
of bare ground in the arid inland at mid-latitudes. We can add a simple
quadratic model to test/approximate this:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{my.fractional}\OperatorTok{$}\NormalTok{quadratic <-}\StringTok{ }\NormalTok{my.fractional}\OperatorTok{$}\NormalTok{latitude}\OperatorTok{^}\DecValTok{2}

\NormalTok{LM <-}\StringTok{ }\KeywordTok{lm}\NormalTok{(bare }\OperatorTok{~}\StringTok{ }\NormalTok{latitude }\OperatorTok{+}\StringTok{ }\NormalTok{quadratic, }\DataTypeTok{data =}\NormalTok{ my.fractional)}
\KeywordTok{summary}\NormalTok{(LM)}
\CommentTok{#> }
\CommentTok{#> Call:}
\CommentTok{#> lm(formula = bare ~ latitude + quadratic, data = my.fractional)}
\CommentTok{#> }
\CommentTok{#> Residuals:}
\CommentTok{#>     Min      1Q  Median      3Q     Max }
\CommentTok{#> -37.162 -10.619  -2.078   9.729  56.228 }
\CommentTok{#> }
\CommentTok{#> Coefficients:}
\CommentTok{#>               Estimate Std. Error t value Pr(>|t|)    }
\CommentTok{#> (Intercept) -164.71186   28.46523  -5.786 9.00e-08 ***}
\CommentTok{#> latitude     -16.63759    2.23952  -7.429 4.50e-11 ***}
\CommentTok{#> quadratic     -0.33299    0.04271  -7.796 7.65e-12 ***}
\CommentTok{#> ---}
\CommentTok{#> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1}
\CommentTok{#> }
\CommentTok{#> Residual standard error: 17.66 on 96 degrees of freedom}
\CommentTok{#> Multiple R-squared:  0.407,  Adjusted R-squared:  0.3946 }
\CommentTok{#> F-statistic: 32.94 on 2 and 96 DF,  p-value: 1.279e-11}

\CommentTok{# generate predicted values for plotting:}
\NormalTok{MinMax <-}\StringTok{ }\KeywordTok{c}\NormalTok{(}\KeywordTok{min}\NormalTok{(my.fractional}\OperatorTok{$}\NormalTok{latitude), }\KeywordTok{max}\NormalTok{(my.fractional}\OperatorTok{$}\NormalTok{latitude))}
\NormalTok{ND <-}\StringTok{ }\KeywordTok{data.frame}\NormalTok{(}\DataTypeTok{latitude =} \KeywordTok{seq}\NormalTok{(}\DataTypeTok{from =}\NormalTok{ MinMax[}\DecValTok{1}\NormalTok{], }\DataTypeTok{to =}\NormalTok{ MinMax[}\DecValTok{2}\NormalTok{], }\DataTypeTok{length.out =} \DecValTok{50}\NormalTok{), }
    \DataTypeTok{quadratic =} \KeywordTok{seq}\NormalTok{(}\DataTypeTok{from =}\NormalTok{ MinMax[}\DecValTok{1}\NormalTok{], }\DataTypeTok{to =}\NormalTok{ MinMax[}\DecValTok{2}\NormalTok{], }\DataTypeTok{length.out =} \DecValTok{50}\NormalTok{)}\OperatorTok{^}\DecValTok{2}\NormalTok{)}
\NormalTok{ND}\OperatorTok{$}\NormalTok{predict <-}\StringTok{ }\KeywordTok{predict}\NormalTok{(LM, }\DataTypeTok{newdata =}\NormalTok{ ND)}
\CommentTok{# }
\KeywordTok{plot}\NormalTok{(bare }\OperatorTok{~}\StringTok{ }\NormalTok{latitude, }\DataTypeTok{data =}\NormalTok{ my.fractional, }\DataTypeTok{pch =} \DecValTok{20}\NormalTok{, }\DataTypeTok{bty =} \StringTok{"n"}\NormalTok{)}
\KeywordTok{points}\NormalTok{(ND}\OperatorTok{$}\NormalTok{latitude, ND}\OperatorTok{$}\NormalTok{predict, }\DataTypeTok{type =} \StringTok{"l"}\NormalTok{, }\DataTypeTok{lwd =} \DecValTok{2}\NormalTok{, }\DataTypeTok{col =} \StringTok{"darkblue"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics{start_guide_files/figure-latex/unnamed-chunk-10-1.pdf}

\hypertarget{example-2-species-by-sites-table}{%
\subsection{Example 2: Species by sites
table}\label{example-2-species-by-sites-table}}

Aside from `gross' values from plots such as fractional cover, many
analyses in community ecology begin with species abundance information.
With \textbf{ausplotsR} you can generate this easily from the more
complex vegetation point-intercept data. The first step to work with
species-level AusPlots data is to create a species occurrence matrix.
The \texttt{species\_table} function in the \textbf{ausplotsR} package
can be used to create this type of matrix. This function takes a data
frame of individual raw point-intercept hits (i.e.~a \texttt{\$veg.PI}
data frame) generated using the \texttt{get\_ausplots} function and
returns a `species against sites' matrix:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{my.sppBYsites <-}\StringTok{ }\KeywordTok{species_table}\NormalTok{(my.ausplots.data}\OperatorTok{$}\NormalTok{veg.PI, }\DataTypeTok{m_kind =} \StringTok{"percent_cover"}\NormalTok{, }
    \DataTypeTok{cover_type =} \StringTok{"PFC"}\NormalTok{)}

\CommentTok{# check the number of rows (plots) and columns (species) in the matrix}
\KeywordTok{dim}\NormalTok{(my.sppBYsites)}
\CommentTok{#> [1]  391 1956}

\CommentTok{# look at the top left corner (as the matrix is large)}
\NormalTok{my.sppBYsites[}\DecValTok{1}\OperatorTok{:}\DecValTok{5}\NormalTok{, }\DecValTok{1}\OperatorTok{:}\DecValTok{5}\NormalTok{]}
\CommentTok{#>                  Abutilon.fraseri Abutilon.halophilum Abutilon.hannii}
\CommentTok{#> NTAARP0001-58422                0                   0               0}
\CommentTok{#> NTAARP0002-58423                0                   0               0}
\CommentTok{#> NTAARP0003-58424                0                   0               0}
\CommentTok{#> NTABRT0001-53616                0                   0               0}
\CommentTok{#> NTABRT0002-53617                0                   0               0}
\CommentTok{#>                  Abutilon.hannii.subsp..prostrate..p.k.latz.427. Abutilon.leucopetalum}
\CommentTok{#> NTAARP0001-58422                                               0                     0}
\CommentTok{#> NTAARP0002-58423                                               0                     0}
\CommentTok{#> NTAARP0003-58424                                               0                     0}
\CommentTok{#> NTABRT0001-53616                                               0                     0}
\CommentTok{#> NTABRT0002-53617                                               0                     0}
\end{Highlighting}
\end{Shaded}

We can crudely pull out the 10 highest ranking species in terms of their
percent cover cumulative across all plots they occur in:

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{rev}\NormalTok{(}\KeywordTok{sort}\NormalTok{(}\KeywordTok{colSums}\NormalTok{(my.sppBYsites)))[}\DecValTok{1}\OperatorTok{:}\DecValTok{10}\NormalTok{]}
\CommentTok{#>     Triodia.basedowii    Aristida.holathera    Eucalyptus.obliqua         Eulalia.aurea }
\CommentTok{#>              651.4038              399.9520              359.5146              340.4958 }
\CommentTok{#>    Eucalyptus.baxteri     Triodia.bitextura     Cenchrus.ciliaris       Triodia.pungens }
\CommentTok{#>              335.0025              325.2499              306.7625              291.3861 }
\CommentTok{#>       Acacia.shirleyi Schizachyrium.fragile }
\CommentTok{#>              282.0792              264.3876}
\end{Highlighting}
\end{Shaded}

A simple example of downstream visualisation and analysis of
species-level AusPlots data is Rank-Abundance Curves (also known as
Whittaker Plots). Rank-Abundance Curves provide further information on
species diversity. They provide a more complete picture than a single
diversity index. Their x-axis represents the abundance rank (from most
to least abundant) and in the y-axis the species relative abundance.
Thus, they depict both Species Richness and Species Evenness (slope of
the line that fits the rank; steep gradient indicates low evenness and a
shallow gradient high evenness).

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{# Whittaker plots for some selected AusPlots:}
\NormalTok{goeveg}\OperatorTok{::}\KeywordTok{racurves}\NormalTok{(my.sppBYsites[}\DecValTok{10}\OperatorTok{:}\DecValTok{15}\NormalTok{, ], }\DataTypeTok{bw =}\NormalTok{ F)}
\end{Highlighting}
\end{Shaded}

\includegraphics{start_guide_files/figure-latex/unnamed-chunk-13-1.pdf}

\begin{Shaded}
\begin{Highlighting}[]

\CommentTok{# And then with alternative relative abundance models fitted for communities}
\CommentTok{# individually:}
\KeywordTok{par}\NormalTok{(}\DataTypeTok{mfrow =} \KeywordTok{c}\NormalTok{(}\DecValTok{2}\NormalTok{, }\DecValTok{2}\NormalTok{), }\DataTypeTok{mar =} \KeywordTok{c}\NormalTok{(}\DecValTok{4}\NormalTok{, }\DecValTok{4}\NormalTok{, }\DecValTok{1}\NormalTok{, }\DecValTok{1}\NormalTok{))}
\ControlFlowTok{for}\NormalTok{ (i }\ControlFlowTok{in} \KeywordTok{c}\NormalTok{(}\DecValTok{1}\OperatorTok{:}\DecValTok{4}\NormalTok{)) \{}
    \KeywordTok{plot}\NormalTok{(vegan}\OperatorTok{::}\KeywordTok{radfit}\NormalTok{(}\KeywordTok{round}\NormalTok{(my.sppBYsites[}\DecValTok{9} \OperatorTok{+}\StringTok{ }\NormalTok{i, ], }\DataTypeTok{digits =} \DecValTok{0}\NormalTok{), }\DataTypeTok{log =} \StringTok{"xy"}\NormalTok{), }\DataTypeTok{pch =} \DecValTok{20}\NormalTok{, }
        \DataTypeTok{legend =} \OtherTok{FALSE}\NormalTok{, }\DataTypeTok{bty =} \StringTok{"l"}\NormalTok{)}
    \KeywordTok{legend}\NormalTok{(}\StringTok{"topright"}\NormalTok{, }\DataTypeTok{legend =} \KeywordTok{c}\NormalTok{(}\StringTok{"Null"}\NormalTok{, }\StringTok{"Preemption"}\NormalTok{, }\StringTok{"Lognormal"}\NormalTok{, }\StringTok{"Zipf"}\NormalTok{, }\StringTok{"Mandelbrot"}\NormalTok{), }
        \DataTypeTok{lwd =} \KeywordTok{rep}\NormalTok{(}\DecValTok{1}\NormalTok{, }\DecValTok{5}\NormalTok{), }\DataTypeTok{col =} \KeywordTok{c}\NormalTok{(}\StringTok{"black"}\NormalTok{, }\StringTok{"red"}\NormalTok{, }\StringTok{"green"}\NormalTok{, }\StringTok{"blue"}\NormalTok{, }\StringTok{"cyan"}\NormalTok{), }\DataTypeTok{cex =} \FloatTok{0.7}\NormalTok{, }
        \DataTypeTok{bty =} \StringTok{"n"}\NormalTok{)}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\includegraphics{start_guide_files/figure-latex/unnamed-chunk-13-2.pdf}

\hypertarget{explore-tern-ausplots}{%
\subsection{Explore TERN AusPlots}\label{explore-tern-ausplots}}

In addition to the key site info and vegetation point-intercept modules
introduced above, \texttt{get\_ausplots} is your gateway to raw data
modules for vegetation structural summaries, vegetation vouchers (covers
the full species diversity observed at the plot and includes tissue
sample details), basal wedge, and soils subsites, bulk density and
pit/characterisation (including bulk and metagenomics soil samples).

\hypertarget{references}{%
\subsection{References}\label{references}}

Blanco-Martin, B. (2019) Tutorial: Understanding and using the
`ausplotsR' package and AusPlots data. Terrestrial Ecology Research
Network. Version 2019.04.0, April 2019.
\url{https://github.com/ternaustralia/TERN-Data-Skills/}

Sparrow, B., Foulkes, J., Wardle, G., Leitch, E., Caddy-Retalic, S., van
Leeuwen, S., Tokmakoff, A., Thurgate, N., Guerin, G.R. and Lowe, A.J.
(2020) A vegetation and soil survey method for surveillance monitoring
of rangeland environments. \emph{Frontiers in Ecology and Evolution},
8:157.

\end{document}
